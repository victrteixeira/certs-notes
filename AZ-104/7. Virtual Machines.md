# Availability
## Availability Options
- **Availability Zones**
- **Virtual Machines Scale Sets**
- **Availability Sets**
- Load Balancer
- Azure Site Recovery
## Availability Zones
- An Availability Zone is a physically separate zone, within an Azure region
- There are **three AZs per supported Azure region** (usually)
- Replicated VMs in zones, you can protect your apps and data from the loss of a data center.
- If one zone is compromised, then replicated apps and data are instantly available in another zone
## Virtual Machine Scale Sets
- It let you create and manage a **group of load balanced VMs**
- The number of VM instances can **automatically** increase or decrease in response to demand or defined schedule
- VMs in a scale set can also be deployed into **multiple availability zones**, a **single availability zone**, or **regionally**
## Availability Sets
- It is a **logical grouping** of VMs that reduce the change of correlated failures bringing down related VMs at the same time.
- ASs place VMs in different **fault domains** for better reliability.
	- Especially beneficial if a region **doesn't** support AZs
- ASs have **update domains**: it is groups of virtual machines and underlying physical hardware that can be restarted at the same time
	- If you have 5 VMs and 5 update domains, the sixth VM will be placed in the first update domain
	- In this situation the update domain one will have two virtual machines, and the next will be placed in the second update domain and so on.
- ASs are place in the same Azure Data Center Zone
- It offers improved VM-to-VM latencies compared to AZs, because VMs in an AS are allocated in closer proximity
- ASs are still susceptible to certain **shared infrastructure failures**, like datacenter network failure which can affect multiple fault domain
# SKUs and Attributes
- **B-Series**: for light use **burstable** workloads
- **D-Series**: for standard, well balanced compute/memory workloads
- **E-Series**: are memory focused VM sizes
- **F-Series**: are CPU focused VM sizes
- **NV-Series**: are VMs that have GPUs in them to support GPU-based workloads
## Attributes
- Attributes are letters that come after the VM family and number of cores: **D8ads_v5**
- **[Family] + [Number of Cores] + [Number of Constraint Cores]** **+ [Attributes] + [Version Number]**
- **Constraint Cores**: 
	- for example *E8-4as_v4*
	- The lower number denotes the number of CPUs that VM is constraint to, but since the number of cores on this SKU is still 8 cores, you will **retain the amount of memory** and every other property of that 8 core E series machine
	- That's for when you need that amount of memory, but don't want the full amount of CPU as you're working with a more memory-related workload and the CPUs are not necessary
	- for SQL workloads as an example, is that a user might want a lot more memory that would typically be in a E8 machine (64GB of RAM) but don’t need the extra CPUs since it is not needed
- Attributes are features added to a VM
	- The ability to mount Premium SSD's in it
	- Temporary Disk for log storage or Ephemeral OS Disk
	- A specific CPU chip, such as AMD chip instead of default intel
# Disks
- Azure Managed Disks are **block-level** storage volumes that are managed by Azure
- Managed Disks are like physical disks in an on-premises server, but they're virtualized
- The available types of managed disks are: **ultra disks, premium solid-state drives (SSDs), standard SSDs, and standard hard disk drives (HDDs)**
## OS Disk
- Every VM has one attached OS disk
- The disk has a pre-installed operating system, and the disk contains the boot volume
- You should store only **OS information on the OS disk**, unless cost is a concern for you
## Data Disk
- It is a managed disk that's attached to a virtual machine to store application data or other data that you need to keep
- The **size** of the virtual machine **determines how many data disks you can attach to it** and the type of storage that you can use to host the disks
## Temporary Disk
- Most VMs contain a temporary disk, which **is not a managed disk**
- It provides short-term storage for applications and processes
- It's intended for storing only data such as page files, swap files, or SQL Server tempdb files
- Data on the temporary disk might be lost during a maintenance event, when you redeploy a VM, or when you stop the VM
# Networking
- When a VM machine is created you **must** put it into a virtual network. If you don't have one, Azure will create one for you
- The network you want to associate to the VM must be in the same region of the VM
- VMs are inside a Virtual Network Subnet and they always have a Network Interface Card (NIC)
	- The NIC has the information about the private IP address and the public IP address (if the instance has one)
- Additionally the network for VMs can have optional resources such as Network Security Groups (NSG) and Load Balancers

